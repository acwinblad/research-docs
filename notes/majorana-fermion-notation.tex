\section{Kitaev Chain and Peierls substitution}

\par
For simplicity we will set $\de$ to be real.
We start with the formulation presented by Kitaev for a spinless or spin-polarized \textit{p}-wave superconductor

\begin{equation}
  H = \sum_j (-t\cc_{j+1} c_j + \de \cc_{j+1}\cc_j + h.c.) - \mu \cc_j c_j.
\end{equation}
The complex fermion operator can be written as a superposition of two Majorana fermions $c_j = \frac{1}{2} (a_j + i b_j)$.
Due to the nature of Majorana fermions, $a^{\dagger}_j = a_j$, the creation operator is $\cc_j = \frac{1}{2} (a_j - i b_j)$.
It is quickly seen after substitution we arrive at

\begin{align}
  \cc_j c_j &= \frac{1}{2} (1 + i a_j b_j), \\
  \cc_l c_j &= \frac{1}{4} (a_l a_j + b_l b_j + i a_l b_j - i b_l a_j), \\
  \cc_l \cc_j &= \frac{1}{4} (a_l a_j - b_l b_j - i a_l b_j - i b_l a_j).
\end{align}

We define the order parameter as $\de \rightarrow \de e^{i \theta{j,l}}$,
where the angle is determined by the next nearest neighbor site.
Another formalism to be used is Peierls substitution, which will give a phase to our hopping term, the creation operator becomes
\begin{align}
  \cc_j \rightarrow \cc_j \exp(-\dfrac{i e}{\hbar} \int_0^{r_j} \vec{A} \cdot d\vec{l}).
\end{align}
This leads us to write out the combinations of operators as
\begin{align}
  \cc_l c_j &\rightarrow \cc_l c_j \exp(-\dfrac{i e}{\hbar} \int_{r_j}^{r_l} \vec{A} \cdot d\vec{l}) \nonumber \\
  &\rightarrow \cc_l c_j e^{i \phi_{j,l}}.
\end{align}

Instead of writing out all the terms we will stick with a generalized direction.
The hopping term and its hermitian conjugate can be written as

\begin{equation}
  -t ( e^{i\phi_{j,l}} \cc_l c_j + e^{-i\phi_{j,l}} \cc_j c_l) = -\dfrac{it}{2} ( \sin\phi_{j,l} (a_l a_j + b_l b_j) + \cos\phi_{j,l} (a_l b_j - b_l a_j) )
\end{equation}
and the order parameter gives

\begin{equation}
  \de ( e^{i\theta_{j,l}} \cc_l \cc_j + e^{-i\theta_{j,l}} c_j c_l) = \dfrac{i\de}{2} ( \sin\theta_{j,l} (a_l a_j - b_l b_j) - \cos\theta_{j,l} (a_l b_j + b_l a_j) ).
\end{equation}
Combining the two with chemical potential, shifting the energy, and taking into account for its anticommutation relationship, we can make the Hamiltonian Hermitian as follows
\begin{align}
  \Ham = -\dfrac{i\mu}{4} \sum_j (a_j b_j - b_j a_j) - \dfrac{i}{4} \sum_{<j,l>} [&(t\sin\phi-\de\sin\theta) a_l a_j + (t\sin\phi+\de\sin\theta) b_l b_j \nonumber \\
  +&(t\cos\phi+\de\cos\theta) a_l b_j - (t\cos\phi-\de\cos\theta) b_l a_j].
\end{align}
I was confused for a bit on the trig arguments in the Hamiltonian.
The angle $\theta_{j,l} = \theta_{l,j}+\pi$ and $\phi_{j,l} = -\phi_{l,j}$ since the direction of integration is in the opposite direction.
The nearest neighbor notation accounts for hopping in both directions, making it Hermitian.

It is easy to check if this gives the solution Kitaev found if we consider one row of lattice points.
We let $\de = t$, $\mu=0$, and $\theta = \phi = 0$.
This leaves us with only $a_l b_j$ terms in the Hamiltonian, an intersite coupling of Majorana fermions, leaving $a_0$ and $b_N$ unaccounted for in the Hamiltonian, i.e. Majorana fermion states.

\section{Conditions for zero modes on a triangular island}

\par
We want to now use a vector potential to drive our system to have zero modes located at the base corners of a triangular lattice.
To simplify our problem down we should analyze the four different couplings present in the Hamiltonian as
\begin{align}
  &(t \sin\phi_{j,l} - \de \sin\theta_{j,l}) a_l a_j, \\
  &(t \sin\phi_{j,l} + \de \sin\theta_{j,l}) b_l b_j, \\
  &(t \cos\phi_{j,l} + \de \cos\theta_{j,l}) a_l b_j, \\
  &(t \cos\phi_{j,l} - \de \cos\theta_{j,l}) b_l a_j
\end{align}

Let us consider a 3-point triangle lattice, where each lattice point is a complex fermion housing two Majorana fermions.
The bottom left point will have $a_1, b_1$, bottom right has $a_2, b_2$, and the top point has $a_3, b_3$.
Similar to Kitaev we will make the same assumptions, $t=\de$ and $\mu=0$.
Doing this lets us see a combination of trig terms.
We need some of these combination to go to zero.
Notice how each individual row looks like a Kitaev chain, we need to look at how the rows interact with each other.
Since our goal is to have two Majorana zero modes at the bottom corners, lets aim to have $a_1$ and $b_2$ be such modes.
Anytime $a_1$ or $b_2$ appear in our equation we need its trig terms to cancel, eliminating those particles coupling to the rest of the system.
Let us look at the energy going from site 1 to site 3, $\theta = \pi/3$, we notice the first and last term should be
\begin{align}
  a_3 a_1 (\sin\phi_{13} - \sin\pi/3) = 0, \\
  b_3 a_1 (\cos\phi_{13} - \cos\pi/3) = 0.
\end{align}
This is true if $\phi_{13} = \pi/3$.

Now let's consider the energy from site 3 to site 2.
The phase angle $\theta = -\pi/3$.
The two equations involving $b_2$ are
\begin{align}
  b_2 b_3 (\sin\phi_{32} + \sin(-\pi/3)) = 0, \nonumber \\
  b_2 a_3 (\cos\phi_{32} - \cos(-\pi/3)) = 0, \nonumber \\
  b_2 b_3 (\sin\phi_{32} - \sin(\pi/3)) = 0, \nonumber \\
  b_2 a_3 (\cos\phi_{32} - \cos(\pi/3)) = 0. \nonumber
\end{align}
Here we see $\phi_{32} = \pi/3$.

\subsection{Constant vector potential}

We now consider a constant vector potential field.
We already have Kitaev chains along the x-direction, to preserve this and allow for some sort of effect between rows we set $\vec{A} = A\hat{y}$.
The 3-point triangle has vertices at $\vec{r}_1 = \langle -a/2,0\rangle$, $\vec{r}_2 = \langle a/2,0\rangle$, and $\vec{r}_3 = \langle 0,\sqrt{3}a/2\rangle$.
Following our definition for the phase integral we set $e=\hbar=1$ and we have
\begin{align}
  \phi_{13} &= -\int_{\vec{r_1}}^{\vec{r_3}} \vec{A} \cdot d\vec{l} \nonumber \\
  &= -A \int_{y_1}^{y_3} \hat{y} \cdot d\vec{l} \nonumber \\
  &= -A \int_0^{\sqrt{3}a/2} dy \nonumber \\
  &= -\dfrac{\sqrt{3} A a}{2} \nonumber \\
  &= \pi/3. \nonumber
\end{align}
We find that we need
\begin{equation} \label{constant vector potential magnitude}
  A = -\dfrac{2 \pi}{3 \sqrt{3} a}.
\end{equation}

Now let us check if this allows for $\phi_{32} = \pi/3$.
\begin{align}
  \phi_{13} &= -\int_{\vec{r_3}}^{\vec{r_2}} \vec{A} \cdot d\vec{l} \nonumber \\
  &= -A \int_{y_3}^{y_2} \hat{y} \cdot d\vec{l} \nonumber \\
  &= -A \int_{\sqrt{3}a/2}^0 dy \nonumber \\
  &= \dfrac{\sqrt{3} A a}{2} \nonumber \\
  &= \dfrac{\sqrt{3} a}{2} \dfrac{-2 \pi}{3 \sqrt{3} a} \nonumber \\
  &= -\pi/3 \neq \pi/3. \nonumber
\end{align}
Here we see that a constant vector potential doesn't achieve our goal, it's off by a sign factor.
This is remedied by using a step function instead with equation \ref{constant vector potential magnitude}
\begin{equation*}
  \vec{A} = \begin{cases}
              -B \hat{y} \quad &x < 0 \\
              B \hat{y} \quad &x > 0 \\
            \end{cases}
\end{equation*}
and where $B$ is sign swapped with $A$ to give
\begin{equation}
  B = \dfrac{2 \pi}{3 \sqrt{3} a}.
\end{equation}
\subsection{Linear vector potential}

What if we choose a linear vector potential?
As stated before we have Kitaev chains along the x-direction, to preserve this and allow for some sort of effect between rows we set $\vec{A} = Bx\hat{y}$.
The 3-point triangle has vertices at $\vec{r}_1 = \langle -a/2,0\rangle$, $\vec{r}_2 = \langle a/2,0\rangle$, and $\vec{r}_3 = \langle 0,\sqrt{3}a/2\rangle$.
From our earlier definition we find
\begin{align}
  \phi_{13} &= -\int_{\vec{r_1}}^{\vec{r_3}} \vec{A} \cdot d\vec{l} \nonumber \\
  &= -\int_{\vec{r_1}}^{\vec{r_3}} Bx dy \nonumber \\
  &= -\int_{x_1}^{x_3} Bx \dfrac{dy}{dx} dx \nonumber \\
  &= -\sqrt{3} B \int_{-a/2}^{0} x dx \nonumber \\
  &= \dfrac{\sqrt{3} B a^2}{8}  \nonumber \\
  &= \pi/3. \nonumber
\end{align}
With some rearranging we find
\begin{align}
  B = \dfrac{8 \pi}{3 \sqrt{3} a^2}.
\end{align}
Now we check to see if this value of $B$ lets $\phi_{32} = \pi/3$.
\begin{align}
  \phi_{32} &= -\int_{x_3}^{x_2} Bx \dfrac{dy}{dx} dx \nonumber \\
  &= \sqrt{3} B \int_{0}^{a/2} x dx \nonumber \\
  &= B \left(\dfrac{\sqrt{3} a^2}{8}\right)  \nonumber \\
  &= \dfrac{8 \pi}{3 \sqrt{3} a^2} \left(\dfrac{\sqrt{3} a^2}{8}\right)  \nonumber \\
  &= \pi/3 \nonumber.
\end{align}
Here we have shown a linear vector potential (symmetric/centered about the y-axis) can produce the right conditions for Majorana zero modes hosted at the triangles base corners.

\subsubsection{setup in numerical solver}

I wanted a spot to write this down instead of it hiding in scripts/code.
If we change the size of the triangular island we need to adjust the magnitude of $B$ for the linear vector potential.
This is fairly straight forward, mostly algebra but here we go anyway.
Start with the botton left corner point, $x_j$, and look at its nearest neighbor along $\theta=\pi/3$, we denote this point with position $x_l$.
If we look back at our integral formulation for the phase we have the general form of
\begin{align}
  \phi_{lj} &= -B \int_{x_j}^{x_l} \dfrac{dy}{dx} x dx \nonumber \\
  &= -\dfrac{\sqrt{3} B}{2} (x_l^2 - x_j^2) = \pi/3. \nonumber
\end{align}
We can rearrange to get
\begin{align}
  B = -\dfrac{2 \pi}{3 \sqrt{3}} \dfrac{1}{x_l^2 - x_j^2}.
\end{align}
That seems almost good enough but an even simpler form can be written and is more convenient.
I use \verb|nr| to denote the number of rows the triangle has, it is one of the first few defined variables.
The positions $x_j$ and $x_l$ have simple linear relations in regards to \verb|nr|.
Due to the equilateral nature of our triangle and centering about the y-axis
\begin{equation}
  x_j = \dfrac{-a}{2} (\verb|nr| - 1).
\end{equation}
It's easy to see that $x_l = x_j + a/2$ which gives
\begin{equation}
  x_l = \dfrac{-a}{2} (\verb|nr| - 2).
\end{equation}
Now, the difference of the squares is
\begin{equation}
  x_l^2 - x_j^2 = \dfrac{-a^2}{4} (2 \verb|nr| - 3).
\end{equation}
Plugging back into our expression we find
\begin{equation}
  \dfrac{8 \pi}{3 \sqrt{3} a^2 (2 \texttt{nr}- 3)}.
\end{equation}
This is expression is easy to implement in code.

While I'm here might as well say how we calculate the phase term.
Since the integral is easy to solve by hand with a simple quadratic expression we directly calculate it.
There is a $dy/dx$ term, both of those terms are calculated already for nearest neighbor and angle calculations, thus the $\pm$ is already accounted for.
Therefore, our phase is simply
\begin{equation}
  \phi = -\dfrac{B}{2} \dfrac{dy}{dx} [x_l^2 - x_j^2]
\end{equation}
